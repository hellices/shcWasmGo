<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WasmTest</title>

    <!-- cd "$(go env GOROOT)/misc/wasm" golang에서 제공함. -->
    <!-- cd  "$(tinygo env TINYGOROOT)/targets" tinygo에서 제공함. -->
    <script src="./wasm_exec.js"></script>
</head>
<body>

  <script>
    const go = new Go();
    WebAssembly.instantiateStreaming(fetch("./main.wasm"), go.importObject)
            .then((wasmModule) => {
              // 웹 어셈블리 로딩
              go.run(wasmModule.instance);

              let str = String.fromCharCode(wasmModule.instance.exports.sendTs()) 
                        + String.fromCharCode(wasmModule.instance.exports.sendEs())
                        + String.fromCharCode(wasmModule.instance.exports.sendSt())

              document.getElementById("text").innerHTML = str
            }).catch(error => {
              console.error(error)
            });
  </script>
  <div id="text" />
</body>
</html>